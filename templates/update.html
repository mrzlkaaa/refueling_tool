{% extends 'base.html' %}
	{% block title %}
	<title> Update Page</title>
	{% endblock %}
	{% block content %}
		<div id='box-large'>
			<div class="card text-center">
				<div class="card-header"> {# Fuel cycle {{ refueling.refueling_name }} 
					from {{ refueling.date.strftime("%d %B, %Y") }} #}
				</div>
				<div class="card-body">
					<div class='container'>
						<div class='row'>
							<div class='col'>
								<table class='burnup-data-multi'>
									<tr>
										<th> 6 </th>
										<th> 5 </th>
										<th> 4 </th>
										<th> 3 </th>
									</tr>
									{% set counter_old = namespace(value=7) %}
									{% for i in old_core %}
									<tr>
										{% for j in i %}
										<td>{{j}}%</td>
										{% if loop.last %}
											<th style="width:90px;"> {{ counter_old.value }} </th>
											{% set counter_old.value = counter_old.value - 1 %}
										{% endif %}
										{% endfor %}
									</tr>
									{% endfor %}
								</table>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<table class='burnup-data-multi'>
									<tr>
										<th> 6 </th>
										<th> 5 </th>
										<th> 4 </th>
										<th> 3 </th>
									</tr>
									{% set counter_new = namespace(value=7) %}
									{% for i in new_core %}
									<tr>
										{% for j in i %}
										<td>{{j}}%</td>
										{% if loop.last %}
											<th style="width:90px;"> {{ counter_new.value }} </th>
											{% set counter_new.value = counter_new.value - 1 %}
										{% endif %}
										{% endfor %}
									</tr>
									{% endfor %}
								</table>
							</div>
						</div>
					</div>
					<div class='inputs'>
						<form method="POST", enctype="multipart/form-data">
							<div class="text-inputs-refuel form-floating mb-3">
								<select name='options' class="form-select" id="floatingSelect" aria-label="Floating label select example">
								<option value='fresh'> Fresh fuel </option>
								<option value='swap'> Swap </option>
								</select>
								<label for="floatingSelect">Choose option</label>
							</div>
							<div class="text-inputs-refuel form-floating mb-3">
								<input type="text" name="numbers" class="form-control" id="floatingInput" placeholder="Typing...">
								<label for="floatingInput">FA numbers</label>
							</div>
							<div class="text-inputs-refuel form-floating mb-3">
								<input name="new_refuel" type="text" id='new-refuel', class="form-control" placeholder="Typing...", style="display: none">
								<label for="new_refuel">Name of refueling</label>
							</div>
							<div class="text-inputs-refuel form-floating">
							<textarea name="description" class="form-control" placeholder="Details..." id="floatingTextarea" style="height: 80px">{{description}}</textarea>
							<label for="floatingTextarea"> Some details </label>
							</div>
							<br>
							<input type="submit" class="text_inputs btn btn-primary">
						</form>
					</div>
				</div>
				<div class="card-footer text-muted">
					Click <a href="#" data-bs-toggle="modal" data-bs-target="#deleteModal"> here </a> to delete instance
				</div>
			</div>
		</div>
	
	<form action='{{url_for("view.delete_step", name=name, id=id)}}' method="POST", enctype="multipart/form-data">
		<!-- Modal -->
		<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
					<h5 class="modal-title" id="deleteModalLabel">Are you sure on deleting refueling instance?</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						All data of current step will be deleted!
					</div>
					<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
					<br>
					<button type="submit" class="btn btn-danger">Delete!</button>
					</div>
				</div>
			</div>
		</div>
	</form>

	<script>
		$(document).ready(function(){
			const select = document.getElementById('floatingSelect')
			console.log(select.options[select.selectedIndex].value)
			$("select").click(function() {
				var option = $(this).val()
				if (option == 'new') {
					$('#new-refuel').css('display', 'block');
					$('#refuel-names-select').css('display', 'none');
					$('#date').css('display', 'block');
					console.log('revealing new input...');
				}
				else if (option == 'add') {
					$('#new-refuel').css('display', 'none');
					$('#refuel-names-select').css('display', 'block');
					$('#date').css('display', 'none');
				}
			})
			
		})
		

	</script>
	{% endblock %}